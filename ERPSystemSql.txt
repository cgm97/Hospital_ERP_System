DROP TABLE ITEM

---- 재고 ITEM 테이블 ----
CREATE TABLE ITEM(
    CODE NUMBER(6) NOT NULL primary key,
    NAME NVARCHAR2(50) NOT NULL,
    TYPE NVARCHAR2(50) NOT NULL,
    DEPARTMENT NVARCHAR2(20) NOT NULL,
    totalcount number(38)
    );
---- 기계 테이블 ----
CREATE TABLE MACHINE(
    CODE NUMBER(6) NOT NULL ,
    NAME NVARCHAR2(50) NOT NULL,
    LOCATION NVARCHAR2(50) NOT NULL,
    DEPARTMENT NVARCHAR2(20) NOT NULL,
    BUYDATE NVARCHAR2(20) NOT NULL,
    INSPECTIONDATE NVARCHAR2(20) NOT NULL
    );
---- 주문 테이블 ----
CREATE TABLE ORDER(
    ORDERNO NUMBER(4) PRIMARY KEY NOT NULL,
    CODE NUMBER(6) NOT NULL ,
    NAME NVARCHAR2(50) NOT NULL,
    TYPE NVARCHAR2(50) NOT NULL,
    DEPARTMENT NVARCHAR2(20) NOT NULL,
    WANTEDDATE DATE DEFAULT SYSDATE,
    APPLICATIONDATE DATE DEFAULT SYSDATE
    );

---- SEQUENCE  ( ID 값 자동 증가 함수) 생성 ----
CREATE SEQUENCE ORDERNO START WITH 1 INCREMENT BY 1 MAXVALUE 100 CYCLE NOCACHE;
ORDERNO.NEXTVAL

INSERT INTO ITEM(CODE, NAME,LOCATION, DEPARTMENT, BUYDATE,INSPECTIONDATE)
VALUES(0000001,'MRI','정형외과2층','정형외과','2021-05-10','2021-05-12');


INSERT INTO ITEM(CODE, NAME, LOCATION DEPARTMENT)
VALUES(0000001,'감기약','10ml','응급실');

---- 재고 합계 및 정보 ----
select distinct code,name,type,DEPARTMENT , (select count(code)from item where code = i.code) as totalCount from item i
update item set totalcount=totalcount-1 where code=1;
